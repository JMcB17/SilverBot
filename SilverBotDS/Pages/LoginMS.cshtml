@page "/mslogin"
@using System.Net
@using System.Text
@using System.IO
@using Microsoft.AspNetCore.Http
@using SilverBotDS.Objects
@using DSharpPlus
@using System.Diagnostics
@using SilverBotDS.WebHelpers
@inject IHttpContextAccessor HttpContextAccessor
@inject Config config
@{
    ViewData["Title"] = "Da login page";
    string code = Request.Query["code"].ToString();
    if (string.IsNullOrEmpty(code) || !string.IsNullOrEmpty(SessionHelper.GetObjectFromJson<string>(HttpContextAccessor.HttpContext.Session, "accessToken")))
    {
        Response.Redirect(config.LoginPageDiscordRedirectUrl);
    }
    else
    {
        //great job silver
        Response.Redirect("/");
    }
}